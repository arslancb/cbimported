<!-- Defining Amplify Requests -->
<script>
    var ajaxURL = baseurl+'/ajax';
    
    //Update sidebar
    amplify.request.define( "videos", "ajax", {
        url: ajaxURL+"/videos.php",
        type: "POST",
        dataType: "json",
        decoder: function( data, status, xhr, success, error ) {
            if ( status === "success" ) {
                success( data );
            } else {
                error( data );
            }
        }
    });
    
     //Groups
    amplify.request.define( "groups", "ajax", {
        url: ajaxURL+"/groups.php",
        type: "POST",
        dataType: "json",
        decoder: function( data, status, xhr, success, error ) {
            if ( status === "success" ) {
                success( data );
            } else {
                error( data );
            }
        }
    });

   
    //defining up clipbucjet ajax request
    amplify.request.define( "main", "ajax", {
        url: ajaxURL+"/main.php",
        type: "POST",
        dataType: "json",
        decoder: function( data, status, xhr, success, error ) {
            if ( status === "success" ) {
                success( data );
            } else {
                error( data );
            }
        }
    });
    
    //photos private message
    amplify.request.define( "photos", "ajax", {
        url: ajaxURL+"/photos.php",
        type: "POST",
        dataType: "json",
        decoder: function( data, status, xhr, success, error ) {
            if ( status === "success" ) {
                success( data );
            } else {
                error( data );
            }
        }
    });
</script>


<!-- Working With the Javascript -->

<script type="text/javascript">
    
    $(document).ready(function(){
       
        $('.popover-class').popover();
        //Adding Comment Hover effect
       
        $('.comments').on('mouseenter','.comment',function(){
            $(this).find('.comment-options').show();
        });
       
        //Adding Comment Mouse-leave effect
        $('.comments').on('mouseleave','.comment',function(){
            $(this).find('.comment-options').hide();
        });
       
        //Adding Spam comment function
        $('.comments').on('click','.spam-comment',function(){
            var cid = $(this).attr('data-id');
            var type = $(this).attr('data-type');
            var typepid = $(this).attr('data-type-id');
            spam_comment(cid,type,typepid);
        })
       
        //Unspam
        $('.comments').on('click','.unspam-comment',function(){
            var cid = $(this).attr('data-id');
            var type = $(this).attr('data-type');
            var typepid = $(this).attr('data-type-id');
            unspam_comment(cid,type,typepid);
        })
       
        //view hide comment...
        $('body').on('click','.view-toggle',function(){
           
            var $toggleobj = $('#'+$(this).attr('data-toggle-id'));
            var $toggletext = $(this).attr('data-toggle-text');
           
            $toggleobj.toggle();
           
            //Changing text...
            if($toggletext)
            {
                $(this).attr('data-toggle-text',$(this).text());
                $(this).text($toggletext);
            }
           
        })
       

        //Init Login Modal box
        $('#login-modal').modal({
            show : false
        });
       
       
        //Initializing Select/Deselect All function
        $('.select_all').click(function(){
            $target = $(this).attr('data-target');
            $controller = this;
            if($(this).is(':checked'))
            {
                $('.'+$target).attr('checked',true);
            }else
            {
                $('.'+$target).attr('checked',false); 
            }
            
            //Bind function to the target..
            $('.'+$target).click(function(){
                $($controller).attr('checked',false);
            })
        });
       
       
        //Init Drop Downs
        $('.cb-dropdown').dropdown();
       $('.cb-tabs-content a').click(function (e) {
            e.preventDefault();
            $(this).tab('show');
        });
        
        //Hiding Children Categories
        $('.categories-nav > ul > li > ol').hide();
        //Adding Toggle
        $('.categories-nav > ul > li .icon-toggle').click(function(){
            $('.categories-nav > ul > li > ol').toggle();
           
            if($('.categories-nav > ul > li > ol').css('display')=='none')
            {
                $(this).removeClass('toggle-invert');
                $(this).parent().removeClass('active');
            }else
            {
                $(this).addClass('toggle-invert');
                $(this).parent().addClass('active');
            }
        })
       
        //Update Playlist Page
        updatePlaylistPage();
       
        //reset form on showing modal
        $('#create-playlist-modal').on('show', function () {
            $('#create-playlist-modal form')[0].reset();
            $('#create-playlist-error').hide().html('');
        });
       
        //Executing Tootltip
        $('.cb-tooltip').tooltip();
        
      
        //Adding sortablities
        $('#playlist-manage').sortable({
            handle : '.move',
            placeholder: "ui-state-highlight",
            axis: 'y',
            stop : function(event,ui){
                
                var formdata = 
                    $('#playlist-manage-form')
                .serialize();
                
               
                update_manage_playlist_order();
                
                formdata += '&mode=update_playlist_order';
                
                amplify.request('main',formdata,function(data){
                    if(data.err)
                    {
                        displayError(data.err);
                    }else
                    {
                        "...";
                    }
                })
            }
        });
        
        
            
    
        $('.save-plst-text').click(function(){

            $(this).button('loading');
            var item_id = $(this).attr('data-id');
            var text = $('#'+item_id+'-text').val();

            save_playlist_item_note(item_id,text);
        })

        
        
        $('.remove_playlist_item').click(function(){
            var title = $(this).attr('data-confirm-title');
            var text = $(this).attr('data-confirm-text');
            var id = $(this).attr('data-id');
            cb_confirm(title,text,function(){
                remove_playlist_item(id);
            });
        })
        
        
        
        /**
         * Setting up upload buttons
         */
        $('.upload_options').on('click','li',function(){
            
            toggle_upload(this);
        })
        
        toggle_upload($('.upload_options li:first'));
        
       
        
        $('.upload_list_container').on('click','.upload_list',function(){
            toggle_upload_list(this);
        });
        
        $('.cbv3-scroller').lionbars({
                autohide: true
        });
        
        $('.playlist-dropdown.open .dropdown-toggle').dropdown('toggle');

        
        $('.selectable-radio').on('click','input[type=radio]',function(){
            $('.selectable-radio.active').removeClass('active');
            $(this).parent('.selectable-radio').addClass('active');
        })
    });

</script>